{% extends 'master.html' %}

{% load static from staticfiles %}

{% block titulo %} Compras {% endblock titulo %}

{% block title-page %} Compras  {% endblock title-page %}

{% block css %}
    <!-- Kendo -->
    <link rel="stylesheet" href="{% static 'libs/kendo/2015.2.624/styles/kendo.rtl.min.css' %}"/>
    <link rel="stylesheet" href="{% static 'libs/kendo/2015.2.624/styles/kendo.common-bootstrap.min.css' %}"/>
    <link rel="stylesheet" href="{% static 'libs/kendo/2015.2.624/styles/kendo.bootstrap.min.css' %}"/>

    <!-- Theme -->
    <link rel="stylesheet" href="{% static 'theme/lib/datetimepicker/css/bootstrap-datetimepicker.min.css' %}"/>
    <link rel="stylesheet" href="{% static 'theme/lib/daterangepicker/css/daterangepicker.css' %}"/>
    <link rel="stylesheet" href="{% static 'theme/lib/select2/css/select2.min.css' %}">
    
    <!-- Nova -->
    <link rel="stylesheet" href="{% static 'grid.css' %}"/>

{% endblock css %}

{% block contenido %}

<div class="be-content">

    <div class="page-head">
        <h2 class="page-head-title">Compras</h2>
        <ol class="breadcrumb page-head-nav">
            <li class="active">Seguimiento</li>
        </ol>
    </div>

    <div class="main-content container-fluid">

        <div class="col-sm-12">
            <div class="panel panel-border panel-contrast">
                <div class="panel-heading panel-heading-default nova-border-bottom">Filtros
                    <div class="tools" data-toggle="collapse" href="#cabecera_colapsible"><span class="icon mdi mdi-caret-down-circle" id="boton_colapsible"></span>
                    </div>
                </div> 
                <div class="panel-body collapse in" id="cabecera_colapsible">

                    <form action="" method="POST"> {% csrf_token %} 

                        <div class="row">
                                
                            <div class="row nova-padding-row">
                                <!-- compañia -->
                                <div class="col-sm-3">
                                    <div class="form-group {% if form.compania.errors %} has-error {% endif %}">

                                    <label class="control-label">
                                    <i class="fa {% if form.compania.errors %} fa-asterisk {% endif %}"></i> 
                                        Compañia
                                    </label>
                                    <p>
                                        {{ form.compania }} 
                                    </p>
                                    {% for error in form.compania.errors %}
                                        <span class="help-block">{{ error }}</span>
                                    {% endfor %}
                                    </div>
                                </div>

                                 <!-- sucursal -->
                                <div class="col-sm-3">
                                    <div class="form-group {% if form.sucursal.errors %} has-error {% endif %}">
                                        <label class="control-label">
                                            <i class="fa {% if form.sucursal.errors %} fa-asterisk {% endif %}"></i> 
                                            Sucursal
                                        </label>
                                        <p>
                                            {{ form.sucursal }}
                                        </p>
                                            {% for error in form.sucursal.errors %}
                                                <span class="help-block">{{ error }}</span>
                                            {% endfor %}                  
                                    </div>
                                </div>   
                                
                                <!-- comprador -->
                                <div class="col-sm-6">
                                    <div class="form-group {% if form.comprador.errors %} has-error {% endif %}">

                                    <label class="control-label">
                                    <i class="fa {% if form.comprador.errors %} fa-asterisk {% endif %}"></i> 
                                        Comprador
                                    </label>
                                    <p>
                                        {{ form.comprador }} 
                                    </p>
                                    {% for error in form.comprador.errors %}
                                        <span class="help-block">{{ error }}</span>
                                    {% endfor %}
                                    </div>
                                </div>
                            </div>                       

                            <!-- requisición -->
                            <div class="row nova-padding-row">
                            <div class="col-sm-3">
                                <div class="form-group {% if form.requisicion.errors %} has-error {% endif %}">

                                <label class="control-label">
                                <i class="fa {% if form.requisicion.errors %} fa-asterisk {% endif %}"></i> 
                                    Requisición
                                </label>
                                <p>
                                    {{ form.requisicion }} 
                                </p>
                                {% for error in form.requisicion.errors %}
                                    <span class="help-block">{{ error }}</span>
                                {% endfor %}
                                </div>
                            </div>

                            <!-- requisición_tipo -->
                            <div class="col-sm-3">
                                <div class="form-group {% if form.requisicion_tipo.errors %} has-error {% endif %}">

                                <label class="control-label">
                                <i class="fa {% if form.requisicion_tipo.errors %} fa-asterisk {% endif %}"></i> 
                                    Tipo
                                </label>
                                <p>
                                    {{ form.requisicion_tipo }} 
                                </p>
                                {% for error in form.requisicion_tipo.errors %}
                                    <span class="help-block">{{ error }}</span>
                                {% endfor %}
                                </div>
                            </div>

                            <!-- requisición_originador -->
                            <div class="col-sm-4">
                                <div class="form-group {% if form.requisicion_originador.errors %} has-error {% endif %}">

                                <label class="control-label">
                                <i class="fa {% if form.requisicion_originador.errors %} fa-asterisk {% endif %}"></i> 
                                    Originador
                                </label>
                                <p>
                                    {{ form.requisicion_originador }} 
                                </p>
                                {% for error in form.requisicion_originador.errors %}
                                    <span class="help-block">{{ error }}</span>
                                {% endfor %}
                                </div>
                            </div>

                            <!-- requisición_canceladas -->
                            <div class="col-sm-2">
                                <div class="form-group {% if form.requisicion_canceladas.errors %} has-error {% endif %}" id="id_requisicion_canceladas">

                                <label class="control-label">
                                <i class="fa {% if form.requisicion_canceladas.errors %} fa-asterisk {% endif %}"></i> 
                                    ¿Mostrar canceladas?
                                </label>
                                <div id="botones_radio">
                                {% for radio in form.requisicion_canceladas %}
                                    <div class="be-radio">
                                      {{ radio.tag }}
                                      <label for="{{ radio.id_for_label }}">{{ radio.choice_label }}</label>
                                    </div>
                                {% endfor %}
                                </div>
                                {% for error in form.requisicion_canceladas.errors %}
                                    <span class="help-block">{{ error }}</span>
                                {% endfor %}
                                </div>
                            </div>
                            </div>
                            
                            <div class="row nova-padding-row">
                            <!-- cotizacion -->
                            <div class="col-sm-3">
                                <div class="form-group {% if form.cotizacion.errors %} has-error {% endif %}">

                                <label class="control-label">
                                <i class="fa {% if form.cotizacion.errors %} fa-asterisk {% endif %}"></i> 
                                    Cotización
                                </label>
                                <p>
                                    {{ form.cotizacion }} 
                                </p>
                                {% for error in form.cotizacion.errors %}
                                    <span class="help-block">{{ error }}</span>
                                {% endfor %}
                                </div>
                            </div>

                            <!-- cotizacion_tipo -->
                            <div class="col-sm-3">
                                <div class="form-group {% if form.cotizacion_tipo.errors %} has-error {% endif %}">

                                <label class="control-label">
                                <i class="fa {% if form.cotizacion_tipo.errors %} fa-asterisk {% endif %}"></i> 
                                    Tipo
                                </label>
                                <p>
                                    {{ form.cotizacion_tipo }} 
                                </p>
                                {% for error in form.cotizacion_tipo.errors %}
                                    <span class="help-block">{{ error }}</span>
                                {% endfor %}
                                </div>
                            </div>

                            <!-- cotización_originador -->
                            <div class="col-sm-4">
                                <div class="form-group {% if form.cotizacion_originador.errors %} has-error {% endif %}">

                                <label class="control-label">
                                <i class="fa {% if form.cotizacion_originador.errors %} fa-asterisk {% endif %}"></i> 
                                    Originador
                                </label>
                                <p>
                                    {{ form.cotizacion_originador }} 
                                </p>
                                {% for error in form.cotizacion_originador.errors %}
                                    <span class="help-block">{{ error }}</span>
                                {% endfor %}
                                </div>
                            </div>

                            <!-- cotizacion_canceladas -->
                            <div class="col-sm-2 pull-right">
                                <div class="form-group {% if form.cotizacion_canceladas.errors %} has-error {% endif %}">

                                <label class="control-label">
                                <i class="fa {% if form.cotizacion_canceladas.errors %} fa-asterisk {% endif %}"></i> 
                                    ¿Mostrar canceladas?
                                </label>
                                {% for radio in form.cotizacion_canceladas %}
                                    <div class="be-radio">
                                      {{ radio.tag }}
                                      <label for="{{ radio.id_for_label }}">{{ radio.choice_label }}</label>
                                    </div>
                                {% endfor %}
                                {% for error in form.cotizacion_canceladas.errors %}
                                    <span class="help-block">{{ error }}</span>
                                {% endfor %}
                                </div>
                            </div>
                            </div>
                                    
                            <div class="row nova-padding-row">
                                <!-- oc -->
                                <div class="col-sm-3">
                                    <div class="form-group {% if form.oc.errors %} has-error {% endif %}">

                                    <label class="control-label">
                                    <i class="fa {% if form.oc.errors %} fa-asterisk {% endif %}"></i> 
                                        OC
                                    </label>
                                    <p>
                                        {{ form.oc }} 
                                    </p>
                                    {% for error in form.oc.errors %}
                                        <span class="help-block">{{ error }}</span>
                                    {% endfor %}
                                    </div>
                                </div>

                                <!-- oc_tipo -->
                                <div class="col-sm-3">
                                    <div class="form-group {% if form.oc_tipo.errors %} has-error {% endif %}">

                                    <label class="control-label">
                                    <i class="fa {% if form.oc_tipo.errors %} fa-asterisk {% endif %}"></i> 
                                        Tipo
                                    </label>
                                    <p>
                                        {{ form.oc_tipo }} 
                                    </p>
                                    {% for error in form.oc_tipo.errors %}
                                        <span class="help-block">{{ error }}</span>
                                    {% endfor %}
                                    </div>
                                </div>

                                <!-- oc_originador -->
                                <div class="col-sm-4">
                                    <div class="form-group {% if form.oc_originador.errors %} has-error {% endif %}">

                                    <label class="control-label">
                                    <i class="fa {% if form.oc_originador.errors %} fa-asterisk {% endif %}"></i> 
                                        Originador
                                    </label>
                                    <p>
                                        {{ form.oc_originador }} 
                                    </p>
                                    {% for error in form.oc_originador.errors %}
                                        <span class="help-block">{{ error }}</span>
                                    {% endfor %}
                                    </div>
                                </div>

                                <!-- oc_canceladas -->
                                <div class="col-sm-2 pull-right">
                                    <div class="form-group {% if form.oc_canceladas.errors %} has-error {% endif %}">

                                    <label class="control-label">
                                    <i class="fa {% if form.oc_canceladas.errors %} fa-asterisk {% endif %}"></i> 
                                        ¿Mostrar canceladas?
                                    </label>
                                    {% for radio in form.oc_canceladas %}
                                        <div class="be-radio">
                                          {{ radio.tag }}
                                          <label for="{{ radio.id_for_label }}">{{ radio.choice_label }}</label>
                                        </div>
                                    {% endfor %}
                                    {% for error in form.oc_canceladas.errors %}
                                        <span class="help-block">{{ error }}</span>
                                    {% endfor %}
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row nova-padding-row">
                            <!-- req_desde  y req_hasta-->
                            <div class="col-sm-4">
                                <div class="form-group {% if form.oc_desde.errors %} has-error {% endif %}">
                                    <label class="control-label">Fecha creación requisición  </label>
                                    
                                        <div class="input-group">
                                            <input type="text" value="" readonly="" class="form-control input-xs" id="fecha_req_desde_hasta">
                                            <span class="input-group-addon btn btn-primary">
                                                <i class="icon-th mdi mdi-calendar"></i>
                                            </span>
                                        </div>
                                    
                                </div>
                            </div>

                            <div class="col-sm-4">
                                <div class="form-group {% if form.oc_desde.errors %} has-error {% endif %}">
                                    <label class="control-label">Fecha de creación orden </label>
                                    <div class="input-group">
                                        <input type="text" value="" readonly="" class="form-control input-xs" id="fecha_ord_desde_hasta">
                                        <span class="input-group-addon btn btn-primary">
                                            <i class="icon-th mdi mdi-calendar"></i>
                                        </span>
                                    </div>
                                </div>
                            </div>

                            </div><!-- class row -->

                            <div>
                             <!-- proveedor -->
                            <div class="col-sm-4">
                                <div class="form-group {% if form.proveedor.errors %} has-error {% endif %}">

                                <label class="control-label">
                                <i class="fa {% if form.proveedor.errors %} fa-asterisk {% endif %}"></i> 
                                    Proveedor
                                </label>
                                <p>
                                    {{ form.proveedor }} 
                                </p>
                                {% for error in form.proveedor.errors %}
                                    <span class="help-block">{{ error }}</span>
                                {% endfor %}
                                </div>
                            </div>

                            <!-- item -->
                            <div class="col-sm-4">
                                <div class="form-group {% if form.item.errors %} has-error {% endif %}">

                                <label class="control-label">
                                <i class="fa {% if form.item.errors %} fa-asterisk {% endif %}"></i> 
                                    Item
                                </label>
                                <p>
                                    {{ form.item }} 
                                </p>
                                {% for error in form.item.errors %}
                                    <span class="help-block">{{ error }}</span>
                                {% endfor %}
                                </div>
                            </div>

                             <!-- recepcion -->
                            <div class="col-sm-3 pull-right">
                                <div class="form-group {% if form.recepcion.errors %} has-error {% endif %}">

                                <label class="control-label">
                                <i class="fa {% if form.recepcion.errors %} fa-asterisk {% endif %}"></i> 
                                    Recepción
                                </label>
                                <p>
                                    {{ form.recepcion }} 
                                </p>
                                {% for error in form.recepcion.errors %}
                                    <span class="help-block">{{ error }}</span>
                                {% endfor %}
                                </div>
                            </div>
                            </div>

                        </div>
                        <button type="button" id="boton_limpiar" class="btn btn-default pull-left">
                            <i class="fa fa-eraser"></i>
                            Limpiar
                        </button>

                        <button type="button" id="boton_buscar" class="btn nova-btn btn-primary btn-lg pull-right" method='POST'>
                            <i class="icon icon-left mdi mdi-search nova-white"></i>
                            Buscar
                        </button>
                    </form>
                </div> <!-- Panel Body -->
            </div>  <!-- Panel -->
        </div>  <!-- col-sm-12 -->
        
        {% if True %}<!--Preguntar si al cargar la ventana va a estar oculto el grid-->
        <div class="col-sm-12">
            <div class="panel panel-default panel-table">
                <div class="panel-heading panel-border nova-panel-heading">
                    <div class="tools pull-right" id="toolbar">
                        <button class="btn nova-btn btn-rounded btn-space btn-success" id="boton_excel">
                            <i class="icon icon-left mdi mdi-download nova-white"></i>Exportar
                        </button>
                    </div>
                    <div class="title hidden-xs">Registros</div>
                </div><!-- Panel Heading -->
                <div id="grid_resultados">
                </div>
                <div class="panel-footer panel-border nova-panel-footer panel-border">
                </div><!-- Panel Footer -->
            </div> <!-- Panel -->
        </div><!-- col sm 12-->
        {% endif %}
        
        <div id="popup_filtros" role="dialog" class="modal fade colored-header colored-header-primary in">
            <div class="modal-dialog custom-width">
                <div class="modal-content">
                    
                    <div class="modal-header nova-modal-header">
                        <button type="button" data-dismiss="modal" aria-hidden="true" class="close md-close"><span class="mdi mdi-close nova-white"></span></button>
                        <h3 class="modal-title">Detalles</h3>
                    </div>
                    
                    <div class="modal-body">
                        <div id="tabla_detalles" class="nova-div-overflow">
                            
                        </div>
                    </div>

                    <div class="modal-footer nova-modal-footer">
                        <div class="row col-sm-12">
                            <button type="button" data-dismiss="modal" class="btn nova-btn btn-default pull-right">Aceptar</button>
                        </div>
                    </div>
                </div> <!-- Modal content-->
            </div> <!-- Modal dialog -->
        </div><!-- Modal -->

        <!-- Targeta Filtros -->
        <div id="tarjeta_filtros" role="dialog" class="modal fade colored-header colored-header-primary">
            <div class="modal-dialog custom-width">
                <div class="modal-content">
                    
                    <div class="modal-header nova-modal-header">
                        <button type="button" data-dismiss="modal" aria-hidden="true" class="close md-close"><span class="mdi mdi-close nova-white"></span></button>
                        <h3 class="modal-title">Filtros</h3>
                    </div>
                        
                    <form id="formulario_filtro" class="modal-body form-horizontal">

                        <div class="form-group">
                            <label class="col-sm-3 nova-col-filter control-label">Proposito del Viaje</label>
                            <div class="col-sm-7 xs-pt-5">
                                {{ form.proposito_viaje }}
                            </div>
                        </div>                

                        <div class="form-group">
                            <label class="col-sm-3 nova-col-filter control-label">Empleado</label>
                            <div class="col-sm-7 xs-pt-5">
                                {{ form.empleado }}
                            </div>
                        </div>

                        <div class="form-group">
                          <label class="col-sm-3 nova-col-filter control-label">Unidad de Negocio</label>
                          <div class="col-sm-7 xs-pt-5">
                            {{ form.unidad_negocio }}
                          </div>
                        </div>

                        <div class="form-group">
                          <label class="col-sm-3 nova-col-filter control-label">Destino</label>
                          <div class="col-sm-7 xs-pt-5">
                            {{ form.ciudad_destino }}
                          </div>
                        </div>                    

                        <div class="form-group">
                          <label class="col-sm-3 nova-col-filter control-label">Autorizador</label>
                          <div class="col-sm-7 xs-pt-5">
                            {{ form.autorizador }}
                          </div>
                        </div>                                        

                        <div class="form-group">
                            <label class="col-sm-3 nova-col-filter control-label">Fecha Creacion</label>
                            <div class="col-sm-7 xs-pt-5">
                                <div class="input-group"> 
                                    <input type="text" value="" readonly="" class="form-control input-xs" id="fecha_creacion">
                                    <span class="input-group-addon btn btn-primary">
                                        <i class="icon-th mdi mdi-calendar"></i>
                                    </span>
                                </div>
                            </div>
                        </div>

                    </form><!-- Modal body-->
                    <div class="modal-footer nova-modal-footer">
                         <div class="row col-sm-12">
                                <button type="button" data-dismiss="modal" class="btn btn-default pull-left">
                                    Cancelar
                                </button>

                                <button type="button" id="boton_limpiar" class="btn btn-default nova-btn">
                                    <i class="fa fa-eraser"></i>
                                    Limpiar
                                </button>

                                <button type="button" id="boton_buscar" class="btn nova-btn btn-primary btn-lg pull-right">
                                    <i class="icon icon-left mdi mdi-search nova-white"></i>
                                    Buscar
                                </button>
                        </div>
                    </div>
                </div> <!-- Modal content-->
            </div> <!-- Modal dialog -->
        </div><!-- Modal -->


    </div>
</div>

{% endblock contenido %}

{% block scripts %}

    <!--JSZIP -->
    <script src="{% static 'libs/kendo/2015.2.624/js/jszip.min.js' %}"></script>

    <!-- Kendo Js -->
    <script src="{% static 'libs/kendo/2015.2.624/js/cultures/kendo.culture.es-MX.min.js' %}"></script>
    <script src="{% static 'libs/kendo/2015.2.624/js/kendo.web.min.js' %}"></script>

    <!-- Moment -->
    <script src="{% static 'libs/momentjs/2.18.1/moment.js' %}"></script>    

    <!-- Theme -->
    <script src="{% static 'theme/lib/jquery-ui/jquery-ui.min.js' %}"></script>
    <script src="{% static 'theme/lib/datetimepicker/js/bootstrap-datetimepicker.min.js' %}"></script>
    <script src="{% static 'theme/lib/datetimepicker/js/locales/bootstrap-datetimepicker.es.js' %}"></script>
    <script src="{% static 'theme/lib/daterangepicker/js/daterangepicker.js' %}"></script>
    <script src="{% static 'theme/lib/select2/js/select2.min.js' %}"></script>
    <script src="{% static 'theme/lib/select2/js/select2.full.min.js' %}"></script>

    <!-- NOVA -->
    <script src="{% static 'seguimiento_compras.js' %}"></script>

{% endblock scripts %}

