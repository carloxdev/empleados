{% extends 'master.html' %}
{% load static from staticfiles %}
{% block titulo %} Usuarios {% endblock titulo %}
{% block title-page %} Nuevo usuario {% endblock title-page %}
{% block css %}
<!-- Kendo -->
<link rel="stylesheet" href="{% static 'libs/kendo/2015.2.624/styles/kendo.rtl.min.css' %}"/>
<link rel="stylesheet" href="{% static 'libs/kendo/2015.2.624/styles/kendo.common-bootstrap.min.css' %}"/>
<link rel="stylesheet" href="{% static 'libs/kendo/2015.2.624/styles/kendo.bootstrap.min.css' %}"/>
<!-- Theme -->
<link rel="stylesheet" href="{% static 'theme/lib/datetimepicker/css/bootstrap-datetimepicker.min.css' %}"/>
<link rel="stylesheet" href="{% static 'theme/lib/select2/css/select2.min.css' %}">
<!-- Nova -->
<link rel="stylesheet" href="{% static 'grid.css' %}"/>
{% endblock css %}
{% block contenido %}
<div class="be-content">
<div class="page-head">
	<h2 class="page-head-title">Editar usuario</h2>
	<ol class="breadcrumb page-head-nav">
		<li><a href="{% url 'home:inicio' %}">Inicio</a></li>
		<li><a href="{% url 'seguridad:usuario_editar' user.id %}">Editar perfil</a></li>
		<li>Cambiar contraseña</li>
	</ol>
</div>
<div class="col-md-12">
	<div class="main-content container-fluid">
		<div class="col-md-12">
			<div class="panel panel-default panel-table">
				<div class="panel-heading panel-border nova-panel-heading">
					<div class="title hidden-xs">Usuario <b>{{ user.username }}</b>
					</div>
					</div><!-- Panel Heading -->
					<div class="panel panel-default panel-table">
						<form action="" method="POST" enctype="multipart/form-data"> {% csrf_token %}
								
						<br>
						<!--Nuevo Password-->
								<div class="form-group {% if form.password1.errors %} has-error {% endif %}">
									<label class="control-label">
										{{form.password1.label}}
									</label>
									<p>{{ form.password1 }}</p>
								</div>
						<!-- Confirmar Password-->
								<div class="form-group {% if form.password2.errors %} has-error {% endif %}">
									<label class="control-label">
										{{form.password2.label}}
									</label>
									<p> {{form.password2}} </p>
									{% for error in form.password2.errors %}
										<span class="help-block">{{ error }}</span>
									{% endfor %}
								</div>

						{% if form.errors %}
						    {% for field in form %}
						        {% for error in field.errors %}
						            <div class="alert alert-danger">
						                <strong>{{ error|escape }}</strong>
						            </div>
						        {% endfor %}
						    {% endfor %}
						    {% for error in form.non_field_errors %}
						        <div class="alert alert-danger">
						            <strong>{{ error|escape }}</strong>
						        </div>
						    {% endfor %}
						{% endif %}
						

						{% if request.user.is_staff == False %}
							<a class="button" href="{% url 'seguridad:usuario_editar_perfil' request.user.id %}"> Regresar </a>
						{% else %}
							<a class="button" href="{% url 'seguridad:usuario_editar' user.id %}"> Regresar </a>
						{% endif %}
						<button type="submit" class="btn btn-primary" id="id_boton_guardar" >Guardar contraseña</button>
					</form>
				</div>
			</div>
		</div>
	</div>
</div>
{% endblock contenido %}
{% block scripts %}
<!-- Kendo Js -->
<script src="{% static 'libs/kendo/2015.2.624/js/cultures/kendo.culture.es-MX.min.js' %}"></script>
<script src="{% static 'libs/kendo/2015.2.624/js/kendo.web.min.js' %}"></script>
<!-- Theme -->
<script src="{% static 'theme/lib/jquery-ui/jquery-ui.min.js' %}"></script>
<script src="{% static 'theme/lib/moment.js/min/moment.min.js' %}"></script>
<!-- NOVA -->

{% endblock scripts %}