{% extends 'master.html' %}
{% load static from staticfiles %}
{% block titulo %} Perfil {% endblock titulo %}
{% block title-page %} Perfil de usuario {% endblock title-page %}
{% block css %}
<!-- Kendo -->
<link rel="stylesheet" href="{% static 'libs/kendo/2015.2.624/styles/kendo.rtl.min.css' %}"/>
<link rel="stylesheet" href="{% static 'libs/kendo/2015.2.624/styles/kendo.common-bootstrap.min.css' %}"/>
<link rel="stylesheet" href="{% static 'libs/kendo/2015.2.624/styles/kendo.bootstrap.min.css' %}"/>
<!-- Theme -->
<link rel="stylesheet" href="{% static 'theme/lib/datetimepicker/css/bootstrap-datetimepicker.min.css' %}"/>
<link rel="stylesheet" href="{% static 'theme/lib/select2/css/select2.min.css' %}">
<!-- Nova -->
<link rel="stylesheet" href="{% static 'grid.css' %}"/>
{% endblock css %}
{% block contenido %}
<div class="be-content">
<div class="page-head">
	<h2 class="page-head-title">Cambiar contraseña</h2>
	<ol class="breadcrumb page-head-nav">
		<li><a href="{% url 'home:inicio' %}">Inicio</a></li>
		<li><a href="{% url 'seguridad:usuario_editar_perfil' request.user.id %}">Perfil de usuario</a></li>
		<li>Cambiar contraseña</li>
	</ol>
<div class="col-md-12">
	<div class="main-content container-fluid">
		<div class="col-md-12">
			<div class="panel panel-default panel-table">
				<div class="panel-heading panel-border nova-panel-heading">
					<div class="title hidden-xs">Usuario <b>{{request.user.username}}</b>
					</div>
				</div><!-- Panel Heading -->
					<div class="panel panel-default panel-table">
						<form action="" method="POST" enctype="multipart/form-data"> {% csrf_token %}
						<br>
						<!--Actual Password-->
						<div class="form-group {% if form.contrasena_actual.errors %} has-error {% endif %}">
							<label class="control-label">
								{{form.contrasena_actual.label}}
							</label>
							<p>{{ form.contrasena_actual }}</p>
						</div>

						<!--Nuevo Password-->
						<div class="form-group {% if form2.password1.errors %} has-error {% endif %}">
							<label class="control-label">
								{{form2.password1.label}}
							</label>
							<p>{{ form2.password1 }}</p>
						</div>
						<!-- Confirmar Password-->
						<div class="form-group {% if form2.password2.errors %} has-error {% endif %}">
							<label class="control-label">
								{{form2.password2.label}}
							</label>
							<p> {{form2.password2}} </p>
						</div>

						{% if form2.errors %}
						    {% for field in form2 %}
						        {% for error in field.errors %}
						            <div class="alert alert-danger">
						                <strong>{{ error|escape }}</strong>
						            </div>
						        {% endfor %}
						    {% endfor %}
						    {% for error in form2.non_field_errors %}
						        <div class="alert alert-danger">
						            <strong>{{ error|escape }}</strong>
						        </div>
						    {% endfor %}
						{% endif %}
						{% if messages %}
						    {% for message in messages %}
						    	<div class="alert alert-danger">
						            <strong>{{message}}</strong>
						        </div>
						    {% endfor %}
						{% endif %}
						<a class="button" href="{% url 'seguridad:usuario_editar_perfil' request.user.id %}"> Regresar </a>
						<button type="submit" class="btn btn-primary" id="id_boton_guardar" >Guardar contraseña</button>
					</form>
				</div>
			</div>
		</div>
	</div>
</div>
{% endblock contenido %}
{% block scripts %}
<!-- Kendo Js -->
<script src="{% static 'libs/kendo/2015.2.624/js/cultures/kendo.culture.es-MX.min.js' %}"></script>
<script src="{% static 'libs/kendo/2015.2.624/js/kendo.web.min.js' %}"></script>
<!-- Theme -->
<script src="{% static 'theme/lib/jquery-ui/jquery-ui.min.js' %}"></script>
<script src="{% static 'theme/lib/moment.js/min/moment.min.js' %}"></script>
<!-- NOVA -->

{% endblock scripts %}