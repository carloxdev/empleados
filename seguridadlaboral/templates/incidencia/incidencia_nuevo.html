{% extends 'master.html' %}

{% load static from staticfiles %}

{% block titulo %} Incidencia {% endblock titulo %}

{% block title-page %} Nueva Incidencia {% endblock title-page %}

{% block css %}

	<!-- Kendo -->
	<link rel="stylesheet" href="{% static 'libs/kendo/2015.2.624/styles/kendo.rtl.min.css' %}"/>
	<link rel="stylesheet" href="{% static 'libs/kendo/2015.2.624/styles/kendo.common-bootstrap.min.css' %}"/>
	<link rel="stylesheet" href="{% static 'libs/kendo/2015.2.624/styles/kendo.bootstrap.min.css' %}"/>

	<!-- DatePicker -->
	<link rel="stylesheet" href="{% static 'libs/bootstrap-datepicker/2.0/dist/css/bootstrap-datepicker.min.css' %}"/>


{% endblock css %}


{% block contenido %}


	<div class="be-content">

		 <div class="page-head nova-page-head">
	        <h2 class="page-head-title nova-title">Nueva Incidencia</h2>
	        <ol class="breadcrumb page-head-nav pull-right">
	            <li><a href="{% url 'home:inicio'%}">Inicio</a></li>
	            <li><a href="{% url 'seguridadlaboral:incidencia_lista' %}">Incidencias</a></li>
					<li class="active" id="menu" data-opcion="seguridad_incidencia">{% if id %}Edici√≥n {% else %} Nuevo {% endif %}</li>
	        </ol>
	    </div>
		 <div class="main-content container-fluid nova-main-content">
	      <div class="row wizard-row">

				<div class="col-sm-12">
					<div class="panel panel-border panel-contrast">
			            <div class="panel-heading panel-heading-default nova-border-bottom">Solicitud de Incidencia: {% if id %}<strong value="{{ id }}" id="registrable">{{ id }}</strong>{% endif %}
			               	{% if operation != '' %} <span class="label label-primary nova-label-centrado">{{ operation }}</span> {% endif %}
			               	<div class="tools" data-toggle="collapse" href="#cabecera_colapsible">{% if registrable %}<span class="icon mdi mdi-caret-down-circle" id="boton_colapsible"></span>{% endif %}</div>
			            </div>
			            <div class="panel-body collapse {% if not registrable %}in{% endif %}" id="cabecera_colapsible">

			                <form action="" method="POST"> {% csrf_token %}

									<div class="row">

										<!-- Tipo de Incidencia -->
										<div class="col-sm-4">

											<div class="form-group {% if form.tipo.field.required %} has-warning {% endif %} {% if form.tipo.errors %} has-error {% endif %}">

											<label class="control-label">
											<i class="fa {% if form.tipo.field.required %} fa-asterisk {% endif %} {% if form.tipo.errors %} fa-asterisk {% endif %}"></i>
												{{ form.tipo.label }}
											</label>
											<p>
												{{ form.tipo }}
											</p>
											{% for error in form.tipo.errors %}
												<span class="help-block">{{ error }}</span>
											{% endfor %}
											</div>
										</div>

									</div>

									<div class="row">

										<!-- Es registrable -->
										<div class="col-sm-4">

											<div class="form-group {% if form.es_registrable.field.required %} has-warning {% endif %} {% if form.es_registrable.errors %} has-error {% endif %}">

											<label class="control-label">
											<i class="fa {% if form.es_registrable.field.required %} fa-asterisk {% endif %} {% if form.es_registrable.errors %} fa-asterisk {% endif %}"></i>
												{{ form.es_registrable.label }}
											</label>
											<p>
												{{ form.es_registrable}}
											</p>
											{% for error in form.es_registrable.errors %}
												<span class="help-block">{{ error }}</span>
											{% endfor %}
											</div>
										</div>

									</div>


		                                <!-- Fecha -->
		                                <!--<div class="row">
											<div class="col-sm-4">
												<label for="{{ form.fecha.id_for_label }}"> Fecha: </label>
						                            <div data-min-view="2" data-date-format="yyyy-mm-dd" class="input-group date datetimepicker">

						                                    {{ form.fecha }}
						                            <span class="input-group-addon btn btn-primary"><i class="icon-th mdi mdi-calendar"></i></span>
						                            </div>
											</div>
										</div>-->


		                                 <!-- Fecha -->
		                                <div class="row">
										  <div class="col-sm-4">
		                                   <div class="form-group {% if form.fecha.field.required %} has-warning {% endif %} {% if form.fecha.errors %} has-error {% endif %}">
		                                    <label class="control-label">
											<i class="fa {% if form.fecha.field.required %} fa-asterisk {% endif %}"></i>
											Fecha</label>
											<div class="form-group input-group">
		                                        <div class="input-group date"
			                                         data-min-view="2"
			                                         data-date-format="yyyy-mm-dd"
			                                         id="id_fecha">
		                                            {{ form.fecha }}
		                                                <span class="input-group-addon nova-addon-button">
		                                                <span class="glyphicon glyphicon-calendar"></span>
		                                            </span>
		                                        </div>
		                                    </div>
		                                    {% for error in form.fecha.errors %}
		                                        <span class="help-block">{{ error }}</span>
		                                    {% endfor %}
		                                    </div>
		                                  </div>
		                                </div>


		                                <div class="row">
														<!-- Empleado ID-->
														<div class="col-sm-6">
															<div class="form-group {% if form.empleado_id.field.required %} has-warning {% endif %} {% if form.empleado_id.errors %} has-error {% endif %}">
															<label class="control-label">
															<i class="fa {% if form.empleado_id.field.required %} fa-asterisk {% endif %} {% if form.empleado_id.errors %} fa-asterisk {% endif %}"></i>
																{{ form.empleado_id.label }}
															</label>
															<p>
																{{ form.empleado_id }}
															</p>
															{% for error in form.empleado_id.errors %}
																<span class="help-block">{{ error }}</span>
															{% endfor %}
															</div>
														</div>

												</div>



										<!-- Nombre Empleado -->
										<!--<div class="row">
										<div class="col-sm-6">

											<div class="form-group {% if form.empleado_nombre.field.required %} has-warning {% endif %} {% if form.empleado_nombre.errors %} has-error {% endif %}">

											<label class="control-label">
											<i class="fa {% if form.empleado_nombre.field.required %} fa-asterisk {% endif %} {% if form.empleado_nombre.errors %} fa-asterisk {% endif %}"></i>
												{{ form.empleado_nombre.label }}
											</label>
											<p>
												{{ form.empleado_nombre }}
											</p>
											{% for error in form.empleado_nombre.errors %}
												<span class="help-block">{{ error }}</span>
											{% endfor %}
											</div>
										</div>
										</div>-->


		                                <div class="row">
			                                <!-- Empleado Zona-->
														<div class="col-sm-6">

															<div class="form-group {% if form.zona.field.required %} has-warning {% endif %} {% if form.zona.errors %} has-error {% endif %}">

															<label class="control-label">
															<i class="fa {% if form.zona.field.required %} fa-asterisk {% endif %} {% if form.zona.errors %} fa-asterisk {% endif %}"></i>
																{{ form.zona.label }}
															</label>
															<p>
																{{ form.zona }}
															</p>
															{% for error in form.zona.errors %}
																<span class="help-block">{{ error }}</span>
															{% endfor %}
															</div>
														</div>
													</div>

		                                <!-- Empleado proyecto id-->
		                                <!--<div class="row">
										<div class="col-sm-6">

											<div class="form-group {% if form.empleado_proyecto.field.required %} has-warning {% endif %} {% if form.empleado_proyecto.errors %} has-error {% endif %}">

											<label class="control-label">
											<i class="fa {% if form.empleado_proyecto.field.required %} fa-asterisk {% endif %} {% if form.empleado_proyecto.errors %} fa-asterisk {% endif %}"></i>
												{{ form.empleado_proyecto.label }}
											</label>
											<p>
												{{ form.empleado_proyecto }}
											</p>
											{% for error in form.empleado_proyecto.errors %}
												<span class="help-block">{{ error }}</span>
											{% endfor %}
											</div>
										</div>
										</div>-->

										<!-- Empleado proyecto -->
										<!--<div class="row">
										<div class="col-sm-6">

											<div class="form-group {% if form.empleado_proyecto_desc.field.required %} has-warning {% endif %} {% if form.empleado_proyecto_desc.errors %} has-error {% endif %}">

											<label class="control-label">
											<i class="fa {% if form.empleado_proyecto_desc.field.required %} fa-asterisk {% endif %} {% if form.empleado_proyecto_desc.errors %} fa-asterisk {% endif %}"></i>
												{{ form.empleado_proyecto_desc.label }}
											</label>
											<p>
												{{ form.empleado_proyecto_desc }}
											</p>
											{% for error in form.empleado_proyecto_desc.errors %}
												<span class="help-block">{{ error }}</span>
											{% endfor %}
											</div>
										</div>
										</div>-->


		                                <!-- Empleado puesto id -->
		                                <!--<div class="row">
										<div class="col-sm-6">

											<div class="form-group {% if form.empleado_puesto.field.required %} has-warning {% endif %} {% if form.empleado_puesto.errors %} has-error {% endif %}">

											<label class="control-label">
											<i class="fa {% if form.empleado_puesto.field.required %} fa-asterisk {% endif %} {% if form.empleado_puesto.errors %} fa-asterisk {% endif %}"></i>
												{{ form.empleado_puesto.label }}
											</label>
											<p>
												{{ form.empleado_puesto }}
											</p>
											{% for error in form.empleado_puesto.errors %}
												<span class="help-block">{{ error }}</span>
											{% endfor %}
											</div>
										</div>
										</div>-->

										<!-- Empleado puesto -->
										<!--<div class="row">
										<div class="col-sm-6">

											<div class="form-group {% if form.empleado_puesto_desc.field.required %} has-warning {% endif %} {% if form.empleado_puesto_desc.errors %} has-error {% endif %}">

											<label class="control-label">
											<i class="fa {% if form.empleado_puesto_desc.field.required %} fa-asterisk {% endif %} {% if form.empleado_puesto_desc.errors %} fa-asterisk {% endif %}"></i>
												{{ form.empleado_puesto_desc.label }}
											</label>
											<p>
												{{ form.empleado_puesto_desc }}
											</p>
											{% for error in form.empleado_puesto_desc.errors %}
												<span class="help-block">{{ error }}</span>
											{% endfor %}
											</div>
										</div>
										</div>-->

										<!-- Empleado unidad negocio -->
										<!--<div class="row">
										<div class="col-sm-6">

											<div class="form-group {% if form.empleado_un.field.required %} has-warning {% endif %} {% if form.empleado_un.errors %} has-error {% endif %}">

											<label class="control-label">
											<i class="fa {% if form.empleado_un.field.required %} fa-asterisk {% endif %} {% if form.empleado_un.errors %} fa-asterisk {% endif %}"></i>
												{{ form.empleado_un.label }}
											</label>
											<p>
												{{ form.empleado_un }}
											</p>
											{% for error in form.empleado_un.errors %}
												<span class="help-block">{{ error }}</span>
											{% endfor %}
											</div>
										</div>
										</div>-->


										<!-- Empleado organizacion -->
										<!--<div class="row">
										<div class="col-sm-6">

											<div class="form-group {% if form.empleado_organizacion.field.required %} has-warning {% endif %} {% if form.empleado_organizacion.errors %} has-error {% endif %}">

											<label class="control-label">
											<i class="fa {% if form.empleado_organizacion.field.required %} fa-asterisk {% endif %} {% if form.empleado_organizacion.errors %} fa-asterisk {% endif %}"></i>
												{{ form.empleado_organizacion.label }}
											</label>
											<p>
												{{ form.empleado_organizacion }}
											</p>
											{% for error in form.empleado_organizacion.errors %}
												<span class="help-block">{{ error }}</span>
											{% endfor %}
											</div>
										</div>
										</div>-->

		                                <!-- area id -->
		                                <!--<div class="row">
										<div class="col-sm-6">

											<div class="form-group {% if form.area_id.field.required %} has-warning {% endif %} {% if form.area_id.errors %} has-error {% endif %}">

											<label class="control-label">
											<i class="fa {% if form.area_id.field.required %} fa-asterisk {% endif %} {% if form.area_id.errors %} fa-asterisk {% endif %}"></i>
												{{ form.area_id.label }}
											</label>
											<p>
												{{ form.area_id }}
											</p>
											{% for error in form.area_id.errors %}
												<span class="help-block">{{ error }}</span>
											{% endfor %}
											</div>
										</div>
										</div>-->

										<!-- area descripcion -->
										<!-- <div class="row">
										<div class="col-sm-6">

											<div class="form-group {% if form.area_descripcion.field.required %} has-warning {% endif %} {% if form.area_descripcion.errors %} has-error {% endif %}">

											<label class="control-label">
											<i class="fa {% if form.area_descripcion.field.required %} fa-asterisk {% endif %} {% if form.area_descripcion.errors %} fa-asterisk {% endif %}"></i>
												{{ form.area_descripcion.label }}
											</label>
											<p>
												{{ form.area_descripcion }}
											</p>
											{% for error in form.area_descripcion.errors %}
												<span class="help-block">{{ error }}</span>
											{% endfor %}
											</div>
										</div>
										</div>-->

										<!-- lugar  -->
										<div class="row">
											<div class="col-sm-6">

											<div class="form-group {% if form.lugar.field.required %} has-warning {% endif %} {% if form.lugar.errors %} has-error {% endif %}">

											<label class="control-label">
											<i class="fa {% if form.lugar.field.required %} fa-asterisk {% endif %} {% if form.lugar.errors %} fa-asterisk {% endif %}"></i>
												{{ form.lugar.label }}
											</label>
											<p>
												{{ form.lugar }}
											</p>
											{% for error in form.lugar.errors %}
												<span class="help-block">{{ error }}</span>
											{% endfor %}
											</div>
										</div>
										</div>

										<!-- Dias Incapacidad  -->
										<div class="row">
											<div class="col-sm-6">

												<div class="form-group {% if form.dias_incapcidad.field.required %} has-warning {% endif %} {% if form.dias_incapcidad.errors %} has-error {% endif %}">

												<label class="control-label">
												<i class="fa {% if form.dias_incapcidad.field.required %} fa-asterisk {% endif %} {% if form.dias_incapcidad.errors %} fa-asterisk {% endif %}"></i>
													{{ form.dias_incapcidad.label }}
												</label>
												<p>
													{{ form.dias_incapcidad }}
												</p>
												{% for error in form.dias_incapcidad.errors %}
													<span class="help-block">{{ error }}</span>
												{% endfor %}
												</div>
											</div>
										</div>

										<!-- Centro de Atencion  -->
										<div class="row">
											<div class="col-sm-6">

												<div class="form-group {% if form.centro_atencion.field.required %} has-warning {% endif %} {% if form.centro_atencion.errors %} has-error {% endif %}">

												<label class="control-label">
												<i class="fa {% if form.centro_atencion.field.required %} fa-asterisk {% endif %} {% if form.centro_atencion.errors %} fa-asterisk {% endif %}"></i>
													{{ form.centro_atencion.label }}
												</label>
												<p>
													{{ form.centro_atencion }}
												</p>
												{% for error in form.centro_atencion.errors %}
													<span class="help-block">{{ error }}</span>
												{% endfor %}
												</div>
											</div>
										</div>


										<!-- ACR tiene  -->
										<div class="row">
											<div class="col-sm-6">

											<div class="form-group {% if form.tiene_acr.field.required %} has-warning {% endif %} {% if form.tiene_acr.errors %} has-error {% endif %}">

											<label class="control-label">
											<i class="fa {% if form.tiene_acr.field.required %} fa-asterisk {% endif %} {% if form.tiene_acr.errors %} fa-asterisk {% endif %}"></i>
												{{ form.tiene_acr.label }}
											</label>
											<p>
												{{ form.tiene_acr }}
											</p>
											{% for error in form.tiene_acr.errors %}
												<span class="help-block">{{ error }}</span>
											{% endfor %}
											</div>
										</div>
										</div>



										<!-- Status  -->
										<div class="row">
										<div class="col-sm-6">

											<div class="form-group {% if form.status.field.required %} has-warning {% endif %} {% if form.status.errors %} has-error {% endif %}">

											<label class="control-label">
											<i class="fa {% if form.status.field.required %} fa-asterisk {% endif %} {% if form.status.errors %} fa-asterisk {% endif %}"></i>
												{{ form.status.label }}
											</label>
											<p>
												{{ form.status }}
											</p>
											{% for error in form.status.errors %}
												<span class="help-block">{{ error }}</span>
											{% endfor %}
											</div>
										</div>

										{% if form.errors %}
										    {% for field in form %}
										        {% for error in field.errors %}
										            <div class="alert alert-danger">
										            	{{ field.label }}
										                <strong>{{ error|escape }}</strong>

										            </div>
										        {% endfor %}
										    {% endfor %}
										    {% for error in form.non_field_errors %}
										        <div class="alert alert-danger">
										            <strong>{{ error|escape }}</strong>
										        </div>
										    {% endfor %}
										{% endif %}

										</div><!-- Row -->

								<form class="panel panel-border panel-contrast" action="" method="POST"> {% csrf_token %}
		                      <div class="panel-heading panel-heading-default nova-border-bottom">
		                          Informacion de la solicitud:
		                      </div>
		                      <div class="panel-body form-horizontal">

		                          {% if form.non_field_errors %}

		                              {% for error in form.non_field_errors %}
		                                  {% tag_mensaje 'error' error %}
		                              {% endfor %}

		                          {% endif %}

		                          {% include 'tags/message.html' %}

		                          {% tag_field_registro form.tipo 3 6 %}

		                          {% tag_field_registro form.es_registrable 3 6 %}

										  {% tag_field_registro form.empleado_id 3 6 %}

										  {% tag_field_registro form.zona 3 6 %}

		                          {% tag_field_registro form.lugar 3 6 %}

		                          {% tag_field_registro form.dias_incapcidad 3 6 %}

										  {% tag_field_registro form.centro_atencion 3 6 %}

										  {% tag_field_registro form.tiene_acr 3 6 %}

										  {% tag_field_registro_dates 'Fecha partida/regreso' form.fecha_partida form.fecha_regreso 3 3 3 %}

		                          <!-- Ocultos -->
		                          <div>
		                              {{ form.empleado_descripcion }}
		                              {{ form.un_descripcion }}
		                          </div>

		                      </div>
		                      <div class="modal-footer nova-modal-footer">
		                          <button type="submit" id="boton_buscar" class="btn nova-btn btn-primary btn-lg">
		                              Guardar
		                          </button>
		                      </div>
		             		</form>

							<div class="pull-right">
								<button type="submit" class="btn btn-primary">Guardar incidencia</button>
							</div>

							</form>

		              	</div> <!-- Panel Body -->
		            </div>	<!-- Panel -->
			</div>	<!-- col-sm-12 -->
			</div>
		 </div>


{% endblock contenido %}

{% block scripts %}

	<!-- DatePicker -->
	<script src="{% static 'libs/bootstrap-datepicker/2.0/dist/js/bootstrap-datepicker.min.js' %}"></script>
	<script src="{% static 'libs/bootstrap-datepicker/2.0/dist/locales/bootstrap-datepicker.es.min.js' %}"></script>

   <!-- InputMask -->
   <script src="{% static 'libs/plugins/input-mask/jquery.inputmask.js' %}"></script>

	<!-- Kendo Js -->
	<script src="{% static 'libs/kendo/2015.2.624/js/cultures/kendo.culture.es-MX.min.js' %}"></script>
	<script src="{% static 'libs/kendo/2015.2.624/js/kendo.web.min.js' %}"></script>

	<!-- NOVA -->
	<script src="{% static 'incidencia/incidencia_formulario.js' %}"></script>

{% endblock scripts %}
